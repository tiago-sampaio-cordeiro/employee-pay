<div class="min-h-screen bg-gray-950 flex items-center justify-center p-4" style="font-family: 'DM Mono', monospace;">

  <div class="w-full max-w-sm">

    <%# Flash notice %>
    <% if notice = flash[:notice] %>
      <div class="mb-6 px-4 py-3 bg-emerald-950 border border-emerald-700 text-emerald-400 text-sm rounded-lg text-center tracking-wide">
        <%= notice %>
      </div>
    <% end %>

    <%= render Pages::PageTitleComponent.new(title: "Registro de ponto") %>

    <%# Card principal %>
    <div class="bg-gray-900 border border-gray-800 rounded-2xl p-8 mt-6 shadow-2xl">

      <%# Header %>
      <div class="text-center mb-8">
        <p class="text-gray-500 text-xs uppercase tracking-widest mb-2">Registro de Ponto</p>
        <p class="text-gray-400 text-sm"><%= Date.current.strftime("%A, %d de %B de %Y").capitalize %></p>
<!--        <p class="text-gray-400 text-sm"><%#= I18n.l(Date.current, format: "%A, %d de %B de %Y").capitalize %></p>-->
      </div>

      <%# Relógio <%>
      <div class="text-center mb-10">
        <div id="clock" class="text-6xl font-bold text-white tracking-tight tabular-nums">
          00:00:00
        </div>
      </div>

      <%# Botão único baseado no próximo punch kind %>
      <% if next_punch_kind == "clock_in" %>
        <%= form_with url: employees_path, method: :post do |f| %>
          <%= f.hidden_field :kind, value: "clock_in" %>
          <%= f.submit "Registrar Entrada",
                       class: "w-full py-4 rounded-xl text-sm font-semibold tracking-widest uppercase
                        bg-emerald-500 hover:bg-emerald-400 text-gray-950
                        transition-all duration-200 cursor-pointer shadow-lg shadow-emerald-500/20" %>
        <% end %>
      <% else %>
        <%= form_with url: employees_path, method: :post do |f| %>
          <%= f.hidden_field :kind, value: "clock_out" %>
          <%= f.submit "Registrar Saída",
                       class: "w-full py-4 rounded-xl text-sm font-semibold tracking-widest uppercase
                        bg-rose-500 hover:bg-rose-400 text-white
                        transition-all duration-200 cursor-pointer shadow-lg shadow-rose-500/20" %>
        <% end %>
      <% end %>

    </div>
  </div>

</div>

<link href="https://fonts.googleapis.com/css2?family=DM+Mono:wght@400;500&display=swap" rel="stylesheet">

<script>
    function updateClock() {
        const now = new Date();
        const h = String(now.getHours()).padStart(2, '0');
        const m = String(now.getMinutes()).padStart(2, '0');
        const s = String(now.getSeconds()).padStart(2, '0');
        document.getElementById('clock').textContent = `${h}:${m}:${s}`;
    }
    updateClock();
    setInterval(updateClock, 1000);
</script>
